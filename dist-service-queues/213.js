"use strict";(globalThis.webpackChunk_openmrs_esm_patient_search_app=globalThis.webpackChunk_openmrs_esm_patient_search_app||[]).push([[213],{399:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(5698),a=n.n(r),i=n(9613),o=n.n(i)()(a());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79;--bottom-nav-height: 4rem;--workspace-header-height: 3rem;--tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--bottom-nav-height));--desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height))}.-esm-patient-search__compact-patient-search__patientSearchBar___e8Qbb{width:100%;position:relative}.-esm-patient-search__compact-patient-search__floatingSearchResultsContainer___O1T\\+h{position:absolute;overflow-y:auto;box-shadow:0 .5rem 1rem #e0e0e0;z-index:99;width:100%;background-color:#fff}.-esm-patient-search__compact-patient-search__searchArea___9PQNj{width:inherit;display:flex;justify-content:center;align-items:center;border:1px solid #8d8d8d}.-esm-patient-search__compact-patient-search__patientSearchInput___A5boy{border:none}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/compact-patient-search-extension/compact-patient-search.scss"],names:[],mappings:"AAsDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CACA,yBAAA,CACA,+BAAA,CACA,oGAAA,CACA,2GAAA,CC1DF,uEACE,UAAA,CACA,iBAAA,CAGF,sFACE,iBAAA,CACA,eAAA,CACA,+BAAA,CACA,UAAA,CACA,UAAA,CACA,qBDXM,CCcR,iEACE,aAAA,CACA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,wBAAA,CAGF,yEACE,WAAA",sourcesContent:["@use '@carbon/layout';\n\n$ui-01: #f4f4f4;\n$ui-02: #ffffff;\n$ui-03: #e0e0e0;\n$ui-04: #8d8d8d;\n$ui-05: #161616;\n$text-02: #525252;\n$text-03: #a8a8a8;\n$ui-background: #ffffff;\n$color-gray-30: #c6c6c6;\n$color-gray-70: #525252;\n$color-gray-100: #161616;\n$color-blue-60-2: #0f62fe;\n$color-blue-10: #edf5ff;\n$color-yellow-50: #feecae;\n$carbon--red-50: #fa4d56;\n$inverse-link: #78a9ff;\n$support-02: #24a148;\n$inverse-support-03: #f1c21b;\n$warning-background: #fff8e1;\n$openmrs-background-grey: #f4f4f4;\n$danger: #da1e28;\n$interactive-01: #0f62fe;\n$field-01: #f4f4f4;\n$grey-2: #e0e0e0;\n$labeldropdown: #c6c6c6;\n\n$brand-primary-10: #d9fbfb;\n$brand-primary-20: #9ef0f0;\n$brand-primary-30: #3ddbd9;\n$brand-primary-40: #08bdba;\n$brand-primary-50: #009d9a;\n\n/* 60,70 and 80 are already declared as brand-01, 02 and 03 respectively */\n\n$brand-primary-90: #022b30;\n$brand-primary-100: #081a1c;\n\n@mixin brand-01($property) {\n  #{$property}: #005d5d;\n  #{$property}: var(--brand-01);\n}\n\n@mixin brand-02($property) {\n  #{$property}: #004144;\n  #{$property}: var(--brand-02);\n}\n\n@mixin brand-03($property) {\n  #{$property}: #007d79;\n  #{$property}: var(--brand-03);\n}\n\n:root {\n  --brand-01: #005d5d;\n  --brand-02: #004144;\n  --brand-03: #007d79;\n  --bottom-nav-height: #{layout.$spacing-10};\n  --workspace-header-height: #{layout.$spacing-09};\n  --tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--bottom-nav-height));\n  --desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height));\n}\n\n$breakpoint-phone-min: 0px;\n$breakpoint-phone-max: 600px;\n$breakpoint-tablet-min: 601px;\n$breakpoint-tablet-max: 1023px;\n$breakpoint-small-desktop-min: 1024px;\n$breakpoint-small-desktop-max: 1439px;\n$breakpoint-large-desktop-min: 1440px;\n$breakpoint-large-desktop-max: 99999999px;\n\n/* These color variables will be removed in a future release */\n$brand-teal-01: #007d79;\n$brand-01: #005d5d;\n$brand-02: #004144;\n","@use '@carbon/layout';\n@use '@openmrs/esm-styleguide/src/vars' as *;\n\n.patientSearchBar {\n  width: 100%;\n  position: relative;\n}\n\n.floatingSearchResultsContainer {\n  position: absolute;\n  overflow-y: auto;\n  box-shadow: 0 layout.$spacing-03 layout.$spacing-05 $ui-03;\n  z-index: 99;\n  width: 100%;\n  background-color: $ui-02;\n}\n\n.searchArea {\n  width: inherit;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid $ui-04;\n}\n\n.patientSearchInput {\n  border: none;\n}\n"],sourceRoot:""}]),o.locals={patientSearchBar:"-esm-patient-search__compact-patient-search__patientSearchBar___e8Qbb",floatingSearchResultsContainer:"-esm-patient-search__compact-patient-search__floatingSearchResultsContainer___O1T+h",searchArea:"-esm-patient-search__compact-patient-search__searchArea___9PQNj",patientSearchInput:"-esm-patient-search__compact-patient-search__patientSearchInput___A5boy"};const l=o},3716:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var r=n(5206),a=n.n(r),i=n(5546),o=n(4924),l=n(7234),c=n(634),s=n(6674),u=n(2224),d=n(553),p=n(6062),f=n.n(p),h=n(4036),m=n.n(h),v=n(6793),b=n.n(v),y=n(7892),A=n.n(y),g=n(1173),C=n.n(g),_=n(2464),w=n.n(_),$=n(399),k={};k.styleTagTransform=w(),k.setAttributes=A(),k.insert=b().bind(null,"head"),k.domAPI=m(),k.insertStyleElement=C(),f()($.Z,k);const S=$.Z&&$.Z.locals?$.Z.locals:void 0;function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){x(e,t,n[t])}))}return e}const O=function(e){var t,n,p,f,h=e.selectPatientAction,m=e.initialSearchTerm,v=void 0===m?"":m,b=e.buttonProps,y=(0,o.useTranslation)().t,A=(0,l.useConfig)(),g=(0,r.useRef)(null),C=(0,r.useRef)(null),_=(p=(0,r.useState)(v),f=2,function(e){if(Array.isArray(e))return e}(p)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(p,f)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(p,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=_[0],$=_[1],k=(0,r.useMemo)((function(){var e;return!!(null===(e=w)||void 0===e?void 0:e.trim())}),[w]),x=(0,c.hk)(w,A.includeDead,k),O=x.data,B=(0,r.useCallback)((function(e){return $(e)}),[$]),j=(0,r.useCallback)((function(){return $("")}),[$]),M=(0,r.useCallback)((function(e,t){e.preventDefault(),h?h(O[t].uuid):(0,l.navigate)({to:(0,l.interpolateString)(A.search.patientChartUrl,{patientUuid:O[t].uuid})}),j()}),[A.search,h,O,j]),T=(0,r.useCallback)((function(){var e,t,n=null!==(t=null===(e=g.current.value)||void 0===e?void 0:e.length)&&void 0!==t?t:0;g.current.setSelectionRange(n,n),g.current.focus()}),[g]),z=(0,u.Z)(null!==(n=null===(t=O)||void 0===t?void 0:t.length)&&void 0!==n?n:0,M,T,-1);return(0,r.useEffect)((function(){var e,t,n,r;C.current&&z>-1?(null===(t=C.current.children)||void 0===t||null===(e=t[z])||void 0===e||e.focus(),null===(r=C.current.children)||void 0===r||null===(n=r[z])||void 0===n||n.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})):C.current&&g.current&&-1===z&&T()}),[z,C,T]),a().createElement("div",{className:S.patientSearchBar},a().createElement("form",{onSubmit:function(e){return e.preventDefault()},className:S.searchArea},a().createElement(i.olm,{autoFocus:!0,className:S.patientSearchInput,closeButtonLabelText:y("clearSearch","Clear"),labelText:"",onChange:function(e){return B(e.target.value)},onClear:j,placeholder:y("searchForPatient","Search for a patient by name or identifier number"),ref:g,size:"lg",value:w}),a().createElement(i.zxk,P({type:"submit",onClick:function(e){return e.preventDefault()}},b),y("search","Search"))),k&&a().createElement(s.J7,{value:{nonNavigationSelectPatientAction:h,patientClickSideEffect:j}},a().createElement("div",{className:S.floatingSearchResultsContainer},a().createElement(d.Z,P({query:w,ref:C},x)))))}},6674:(e,t,n)=>{n.d(t,{J7:()=>i,pj:()=>o});var r=n(5206),a=(0,r.createContext)(null),i=a.Provider,o=function(){return(0,r.useContext)(a)}},634:(e,t,n)=>{n.d(t,{E2:()=>h,cg:()=>f,hk:()=>p});var r=n(5206),a=n(3649),i=n(9654),o=n.n(i),l=n(7234);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}var d="custom:(".concat(["patientId","uuid","identifiers","display","patientIdentifier:(uuid,identifier)","person:(gender,age,birthdate,birthdateEstimated,personName,addresses,display,dead,deathDate)","attributes:(value,attributeType:(uuid,display))"].join(","),")");function p(e,t){var n,a,i,c,s,p=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d,m=(0,r.useCallback)((function(n,r){var a,i;if(r&&!(null===(i=r)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.links.some((function(e){return"next"===e.rel}))))return null;var o="".concat(l.restBaseUrl,"/patient"),c=new URLSearchParams(u({q:e,v:h,includeDead:t.toString(),limit:f.toString(),totalCount:"true"},n?{startIndex:(n*f).toString()}:{}));return"".concat(o,"?").concat(c.toString())}),[e,h,t,f]),v=p&&e,b=o()(v?m:null,l.openmrsFetch),y=b.data,A=b.isLoading,g=b.isValidating,C=b.setSize,_=b.error,w=b.size,$=null!==(i=null===(n=y)||void 0===n?void 0:n.flatMap((function(e){var t;return null!==(a=null===(t=e.data)||void 0===t?void 0:t.results)&&void 0!==a?a:[]})))&&void 0!==i?i:null;return(0,r.useMemo)((function(){var e,t,n,r,a,i,o;return{data:$,isLoading:A,fetchError:_,hasMore:null!==(c=null===(r=y)||void 0===r||null===(n=r.at(-1))||void 0===n||null===(t=n.data)||void 0===t||null===(e=t.links)||void 0===e?void 0:e.some((function(e){return"next"===e.rel})))&&void 0!==c&&c,isValidating:g,setPage:C,currentPage:w,totalResults:null!==(s=null===(o=y)||void 0===o||null===(i=o[0])||void 0===i||null===(a=i.data)||void 0===a?void 0:a.totalCount)&&void 0!==s?s:0}}),[$,A,_,y,g,C,w])}function f(){var e,t,n,i,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=null===(e=(0,l.useSession)().user)||void 0===e?void 0:e.uuid,d=o&&s,p="".concat(l.restBaseUrl,"/user/").concat(s),f=(0,a.ZP)(d?p:null,l.openmrsFetch),h=f.data,m=f.error,v=f.isLoading,b=f.mutate,y=null===(n=h)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.userProperties,A=(0,r.useMemo)((function(){var e,t;return null!==(i=null===(t=y)||void 0===t||null===(e=t.patientsVisited)||void 0===e?void 0:e.split(",").filter(Boolean))&&void 0!==i?i:[]}),[y]),g=(0,r.useCallback)((function(e){var t,n,r,a=Array.from(new Set([e].concat((r=A,function(e){if(Array.isArray(e))return c(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())))).slice(0,10),i=(t=u({},y),n=null!=(n={patientsVisited:a.join(",")})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t);return(0,l.openmrsFetch)(p,{method:"POST",headers:{"content-type":"application/json"},body:{userProperties:i}})}),[A,p,y]);return(0,r.useMemo)((function(){return{error:m,isLoadingPatients:v,recentlyViewedPatientUuids:A,updateRecentlyViewedPatients:g,mutateUserProperties:b}}),[m,v,b,A,g])}function h(e){var t,n,a,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d,u=(0,r.useCallback)((function(t){return e&&t<e.length?"".concat(l.restBaseUrl,"/patient/").concat(e[t],"?v=").concat(s):null}),[e,s]),p=i&&null!==e&&e.length>0,f=o()(p?u:null,l.openmrsFetch,{keepPreviousData:!0,initialSize:e?Math.min(c,e.length):0}),h=f.data,m=f.isLoading,v=f.isValidating,b=f.setSize,y=f.error,A=f.size,g=null!==(n=null===(t=h)||void 0===t?void 0:t.flatMap((function(e){return e.data})))&&void 0!==n?n:null;return(0,r.useMemo)((function(){var t;return{data:g,isLoading:m,fetchError:y,hasMore:!!e&&A<e.length,isValidating:v,setPage:b,currentPage:A,totalResults:null!==(a=null===(t=e)||void 0===t?void 0:t.length)&&void 0!==a?a:0}}),[g,m,y,e,A,v,b])}},9653:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(5206);const a=function(e){var t=e.width,n=void 0===t?"72":t,a=e.height,i=void 0===a?"72":a;return r.createElement("svg",{width:n,height:i,viewBox:"0 0 74 72"},r.createElement("title",null,"Empty data illustration"),r.createElement("g",{transform:"translate(1 1)",fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M45.708 15.742h-19.4a1.666 1.666 0 0 0-1.668 1.661l-.222 41.947-5.084 1.588a.89.89 0 0 1-1.11-.588L4.39 15.223a.886.886 0 0 1 .59-1.106l7.334-2.237 21.262-6.482 7.334-2.237a.891.891 0 0 1 1.111.587l3.619 11.773.067.221z",fill:"#CEE6E5"}),r.createElement("path",{d:"M49.942 15.52 45.581 1.333A1.883 1.883 0 0 0 44.66.22a1.896 1.896 0 0 0-1.44-.137L32.908 3.226 11.65 9.71 1.336 12.854a1.883 1.883 0 0 0-1.254 2.351l14.906 48.492a1.892 1.892 0 0 0 2.36 1.25l7.069-2.156.222-.068v-.232l-.222.068-7.134 2.176a1.67 1.67 0 0 1-2.083-1.102L.296 15.14a1.653 1.653 0 0 1 .121-1.266c.208-.389.562-.68.985-.808L11.714 9.92l21.26-6.482L43.287.294a1.668 1.668 0 0 1 2.082 1.102L49.71 15.52l.069.221h.23l-.067-.221z",stroke:"#7BBCB9",strokeWidth:"1.2"}),r.createElement("path",{d:"M13.639 14.153c-.44 0-.828-.286-.958-.705L11.25 8.789a.993.993 0 0 1 .664-1.244l19.56-5.965a1.002 1.002 0 0 1 1.25.661L34.155 6.9a.997.997 0 0 1-.664 1.245l-19.56 5.964a1 1 0 0 1-.292.044z",fill:"#7BBCB9"}),r.createElement("ellipse",{fill:"#C6C6C6",cx:"21.14",cy:"2.762",rx:"2.223",ry:"2.215"}),r.createElement("ellipse",{fill:"#FFF",fillRule:"nonzero",cx:"21.14",cy:"2.762",rx:"1.408",ry:"1.402"}),r.createElement("path",{d:"M66.997 66.735H29.42c-.521 0-.944-.442-.944-.987V18.722c0-.545.423-.986.944-.987h37.577c.522 0 .945.442.945.987v47.026c0 .545-.423.987-.945.987z",fill:"#CEE6E5"}),r.createElement("path",{d:"M49.71 15.52H26.308a1.889 1.889 0 0 0-1.89 1.883v45.156l.222-.068V17.403a1.666 1.666 0 0 1 1.668-1.66h23.47l-.068-.222zm20.4 0H26.308a1.889 1.889 0 0 0-1.89 1.883v50.715A1.889 1.889 0 0 0 26.308 70H70.11A1.889 1.889 0 0 0 72 68.118V17.403a1.889 1.889 0 0 0-1.89-1.882zm1.668 52.598a1.666 1.666 0 0 1-1.668 1.66H26.308a1.666 1.666 0 0 1-1.668-1.66V17.403a1.666 1.666 0 0 1 1.668-1.66H70.11c.92 0 1.667.743 1.668 1.66v50.715z",stroke:"#7BBCB9",strokeWidth:"1.2"}),r.createElement("path",{d:"M58.437 20.393H37.98a1 1 0 0 1-1-.997v-4.872a1 1 0 0 1 1-.997h20.456a1 1 0 0 1 1 .997v4.872a1 1 0 0 1-1 .997z",fill:"#7BBCB9"}),r.createElement("ellipse",{fill:"#C6C6C6",cx:"48.209",cy:"11.645",rx:"2.223",ry:"2.215"}),r.createElement("ellipse",{fill:"#FFF",fillRule:"nonzero",cx:"48.209",cy:"11.645",rx:"1.354",ry:"1.349"})))}},1827:(e,t,n)=>{n.d(t,{h:()=>i});var r=n(6804),a=function(e){switch(e){case"M":return"male";case"F":return"female";case"O":return"other";case"U":return"unknown";default:return e}};function i(e){var t,n,i,o,l,c=null===(t=e.person.addresses)||void 0===t?void 0:t.find((function(e){return e.preferred})),s=(0,r.Z)(),u=(0,r.Z)();return{resourceType:"Patient",address:c?[{id:s,city:c.cityVillage,country:c.country,postalCode:c.postalCode,state:c.stateProvince,use:"home"}]:[],birthDate:e.person.birthdate,deceasedBoolean:e.person.dead,deceasedDateTime:null!==(o=e.person.deathDate)&&void 0!==o?o:void 0,gender:a(e.person.gender),id:e.uuid,identifier:e.identifiers.map((function(e){return{id:e.uuid,type:{coding:[{code:e.identifierType.uuid}],text:e.identifierType.display},use:"official",value:e.identifier}})),name:[{id:u,given:[e.person.personName.givenName,e.person.personName.middleName],family:e.person.personName.familyName,text:e.person.personName.display}],telecom:null!==(l=null===(i=e.attributes)||void 0===i||null===(n=i.filter((function(e){return"Telephone Number"===e.attributeType.display})))||void 0===n?void 0:n.map((function(e){return{system:"phone",value:e.value.toString(),use:"mobile"}})))&&void 0!==l?l:[]}}}}]);