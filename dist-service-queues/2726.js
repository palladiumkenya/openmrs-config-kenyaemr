/*! For license information please see 2726.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_openmrs_esm_service_queues_app=globalThis.webpackChunk_openmrs_esm_service_queues_app||[]).push([[2726],{30345:(e,t,n)=>{n.d(t,{D5:()=>R,E9:()=>p,Q3:()=>L,RI:()=>y,YR:()=>E,g4:()=>_,i6:()=>U,lM:()=>b,rH:()=>h,yn:()=>T,zv:()=>q});var i=n(38254);function r(e,t){null==t?sessionStorage.removeItem(e):sessionStorage.setItem(e,t)}function u(e){return sessionStorage.getItem(e)}var a={queueLocationName:u("queueLocationName")},s={queueLocationUuid:u("queueLocationUuid")},o={serviceUuid:u("queueServiceUuid"),serviceDisplay:u("queueServiceDisplay")},d={statusUuid:u("queueStatusUuid"),statusDisplay:u("queueStatusDisplay")},c={providerQueueRoomTimestamp:new Date},l={isPermanentProviderQueueRoom:u("isPermanentProviderQueueRoom")};function f(){return(0,i.getGlobalStore)("queueSelectedServiceUuid",o)}function v(){return(0,i.getGlobalStore)("queueLocationNameSelected",a)}function S(){return(0,i.getGlobalStore)("queueLocationUuidSelected",s)}function m(){return(0,i.getGlobalStore)("queueStatusUuidSelected",d)}function g(){return(0,i.getGlobalStore)("isPermanentProviderQueueRoom",l)}var E=function(e,t){var n=f();r("queueServiceDisplay",t),r("queueServiceUuid",e),n.setState({serviceUuid:e,serviceDisplay:t})},p=function(e){var t=v();r("queueLocationName",e),t.setState({queueLocationName:e})},U=function(e){var t=S();r("queueLocationUuid",e),t.setState({queueLocationUuid:e})},R=function(e){(0,i.getGlobalStore)("queueProviderRoomTimestamp",c).setState({providerQueueRoomTimestamp:e})},h=function(e){var t=g();r("isPermanentProviderQueueRoom",e),t.setState({isPermanentProviderQueueRoom:e})},T=function(e,t){var n=m();r("queueStatusUuid",e),r("queueStatusDisplay",t),n.setState({statusUuid:e,statusDisplay:t})},L=function(){return(0,i.useStore)(f())},b=function(){return(0,i.useStore)(v()).queueLocationName},y=function(){return(0,i.useStore)(S()).queueLocationUuid},q=function(){return(0,i.useStore)(g()).isPermanentProviderQueueRoom},_=function(){return(0,i.useStore)(m())}},58139:(e,t,n)=>{e.exports=n(93296)},67196:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var i=n(90380),r=n.n(i),u=n(93150),a=n(8050),s=n(61031),o=n(30345);function d(){var e=(0,u.useTranslation)().t,t=(0,o.Q3)(),n=(0,s.jS)(null==t?void 0:t.serviceUuid,"").waitTime;return r().createElement(a.A,{label:e("minutes","Minutes"),headerLabel:e("averageWaitTime","Average wait time today"),service:"waitTime",value:n?n.averageWaitTime:"--"})}},71123:(e,t,n)=>{n.d(t,{Ay:()=>d,BE:()=>o,Tk:()=>u.mutate});var i=n(90380),r=n(58139),u=n(55434);const a=i.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),s={dedupe:!0},o=u.OBJECT.defineProperty(u.SWRConfig,"defaultValue",{value:u.defaultConfig}),d=(0,u.withArgs)((e,t,n)=>{const{cache:o,compare:d,suspense:c,fallbackData:l,revalidateOnMount:f,revalidateIfStale:v,refreshInterval:S,refreshWhenHidden:m,refreshWhenOffline:g,keepPreviousData:E}=n,[p,U,R,h]=u.SWRGlobalState.get(o),[T,L]=(0,u.serialize)(e),b=(0,i.useRef)(!1),y=(0,i.useRef)(!1),q=(0,i.useRef)(T),_=(0,i.useRef)(t),D=(0,i.useRef)(n),V=()=>D.current,w=()=>V().isVisible()&&V().isOnline(),[C,I,P,N]=(0,u.createCacheHelper)(o,T),O=(0,i.useRef)({}).current,k=(0,u.isUndefined)(l)?n.fallback[T]:l,A=(e,t)=>{for(const n in O){const i=n;if("data"===i){if(!d(e[i],t[i])){if(!(0,u.isUndefined)(e[i]))return!1;if(!d(Y,t[i]))return!1}}else if(t[i]!==e[i])return!1}return!0},Q=(0,i.useMemo)(()=>{const e=!!T&&!!t&&((0,u.isUndefined)(f)?!V().isPaused()&&!c&&(!!(0,u.isUndefined)(v)||v):f),n=t=>{const n=(0,u.mergeObjects)(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n},i=C(),r=N(),a=n(i),s=i===r?a:n(r);let o=a;return[()=>{const e=n(C());return A(e,o)?(o.data=e.data,o.isLoading=e.isLoading,o.isValidating=e.isValidating,o.error=e.error,o):(o=e,e)},()=>s]},[o,T]),F=(0,r.useSyncExternalStore)((0,i.useCallback)(e=>P(T,(t,n)=>{A(n,t)||e()}),[o,T]),Q[0],Q[1]),G=!b.current,j=p[T]&&p[T].length>0,M=F.data,W=(0,u.isUndefined)(M)?k:M,x=F.error,H=(0,i.useRef)(W),Y=E?(0,u.isUndefined)(M)?H.current:M:W,z=!(j&&!(0,u.isUndefined)(x))&&(G&&!(0,u.isUndefined)(f)?f:!V().isPaused()&&(c?!(0,u.isUndefined)(W)&&v:(0,u.isUndefined)(W)||v)),B=!!(T&&t&&G&&z),J=(0,u.isUndefined)(F.isValidating)?B:F.isValidating,K=(0,u.isUndefined)(F.isLoading)?B:F.isLoading,X=(0,i.useCallback)(async e=>{const t=_.current;if(!T||!t||y.current||V().isPaused())return!1;let i,r,a=!0;const s=e||{},o=!R[T]||!s.dedupe,c=()=>u.IS_REACT_LEGACY?!y.current&&T===q.current&&b.current:T===q.current,l={isValidating:!1,isLoading:!1},f=()=>{I(l)},v=()=>{const e=R[T];e&&e[1]===r&&delete R[T]},S={isValidating:!0};(0,u.isUndefined)(C().data)&&(S.isLoading=!0);try{if(o&&(I(S),n.loadingTimeout&&(0,u.isUndefined)(C().data)&&setTimeout(()=>{a&&c()&&V().onLoadingSlow(T,n)},n.loadingTimeout),R[T]=[t(L),(0,u.getTimestamp)()]),[i,r]=R[T],i=await i,o&&setTimeout(v,n.dedupingInterval),!R[T]||R[T][1]!==r)return o&&c()&&V().onDiscarded(T),!1;l.error=u.UNDEFINED;const e=U[T];if(!(0,u.isUndefined)(e)&&(r<=e[0]||r<=e[1]||0===e[1]))return f(),o&&c()&&V().onDiscarded(T),!1;const s=C().data;l.data=d(s,i)?s:i,o&&c()&&V().onSuccess(i,T,n)}catch(e){v();const t=V(),{shouldRetryOnError:n}=t;t.isPaused()||(l.error=e,o&&c()&&(t.onError(e,T,t),(!0===n||(0,u.isFunction)(n)&&n(e))&&(V().revalidateOnFocus&&V().revalidateOnReconnect&&!w()||t.onErrorRetry(e,T,t,e=>{const t=p[T];t&&t[0]&&t[0](u.revalidateEvents.ERROR_REVALIDATE_EVENT,e)},{retryCount:(s.retryCount||0)+1,dedupe:!0}))))}return a=!1,f(),!0},[T,o]),Z=(0,i.useCallback)((...e)=>(0,u.internalMutate)(o,q.current,...e),[]);if((0,u.useIsomorphicLayoutEffect)(()=>{_.current=t,D.current=n,(0,u.isUndefined)(M)||(H.current=M)}),(0,u.useIsomorphicLayoutEffect)(()=>{if(!T)return;const e=X.bind(u.UNDEFINED,s);let t=0;const n=(0,u.subscribeCallback)(T,p,(n,i={})=>{if(n==u.revalidateEvents.FOCUS_EVENT){const n=Date.now();V().revalidateOnFocus&&n>t&&w()&&(t=n+V().focusThrottleInterval,e())}else if(n==u.revalidateEvents.RECONNECT_EVENT)V().revalidateOnReconnect&&w()&&e();else{if(n==u.revalidateEvents.MUTATE_EVENT)return X();if(n==u.revalidateEvents.ERROR_REVALIDATE_EVENT)return X(i)}});return y.current=!1,q.current=T,b.current=!0,I({_k:L}),z&&((0,u.isUndefined)(W)||u.IS_SERVER?e():(0,u.rAF)(e)),()=>{y.current=!0,n()}},[T]),(0,u.useIsomorphicLayoutEffect)(()=>{let e;function t(){const t=(0,u.isFunction)(S)?S(C().data):S;t&&-1!==e&&(e=setTimeout(n,t))}function n(){C().error||!m&&!V().isVisible()||!g&&!V().isOnline()?t():X(s).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[S,m,g,T]),(0,i.useDebugValue)(Y),c&&(0,u.isUndefined)(W)&&T){if(!u.IS_REACT_LEGACY&&u.IS_SERVER)throw new Error("Fallback data is required when using suspense in SSR.");_.current=t,D.current=n,y.current=!1;const e=h[T];if(!(0,u.isUndefined)(e)){const t=Z(e);a(t)}if(!(0,u.isUndefined)(x))throw x;{const e=X(s);(0,u.isUndefined)(Y)||(e.status="fulfilled",e.value=!0),a(e)}}return{mutate:Z,get data(){return O.data=!0,Y},get error(){return O.error=!0,x},get isValidating(){return O.isValidating=!0,J},get isLoading(){return O.isLoading=!0,K}}})},93296:(e,t,n)=>{var i=n(90380),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},u=i.useState,a=i.useEffect,s=i.useLayoutEffect,o=i.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),i=u({inst:{value:n,getSnapshot:t}}),r=i[0].inst,c=i[1];return s(function(){r.value=n,r.getSnapshot=t,d(r)&&c({inst:r})},[e,n,t]),a(function(){return d(r)&&c({inst:r}),e(function(){d(r)&&c({inst:r})})},[e]),o(n),n};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:c}}]);