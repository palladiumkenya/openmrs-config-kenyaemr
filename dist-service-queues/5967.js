/*! For license information please see 5967.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_openmrs_esm_service_queues_app=globalThis.webpackChunk_openmrs_esm_service_queues_app||[]).push([[5967],{58139:(e,t,n)=>{e.exports=n(93296)},64349:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(90380),i=n.n(r),s=n(93150),a=n(8050),u=n(61031);function d(){var e=(0,s.useTranslation)().t,t=(0,u.Um)(),n=t.isLoading,r=t.activeVisitsCount;return i().createElement(a.A,{headerLabel:e("checkedInPatients","Checked in patients"),label:e("patients","Patients"),service:"scheduled",value:n?"--":r})}},71123:(e,t,n)=>{n.d(t,{Ay:()=>o,BE:()=>d,Tk:()=>s.mutate});var r=n(90380),i=n(58139),s=n(55434);const a=r.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),u={dedupe:!0},d=s.OBJECT.defineProperty(s.SWRConfig,"defaultValue",{value:s.defaultConfig}),o=(0,s.withArgs)((e,t,n)=>{const{cache:d,compare:o,suspense:c,fallbackData:l,revalidateOnMount:f,revalidateIfStale:E,refreshInterval:g,refreshWhenHidden:v,refreshWhenOffline:h,keepPreviousData:p}=n,[R,S,U,m]=s.SWRGlobalState.get(d),[T,_]=(0,s.serialize)(e),b=(0,r.useRef)(!1),V=(0,r.useRef)(!1),C=(0,r.useRef)(T),L=(0,r.useRef)(t),y=(0,r.useRef)(n),w=()=>y.current,k=()=>w().isVisible()&&w().isOnline(),[O,I,A,D]=(0,s.createCacheHelper)(d,T),N=(0,r.useRef)({}).current,F=(0,s.isUndefined)(l)?n.fallback[T]:l,P=(e,t)=>{for(const n in N){const r=n;if("data"===r){if(!o(e[r],t[r])){if(!(0,s.isUndefined)(e[r]))return!1;if(!o(Y,t[r]))return!1}}else if(t[r]!==e[r])return!1}return!0},j=(0,r.useMemo)(()=>{const e=!!T&&!!t&&((0,s.isUndefined)(f)?!w().isPaused()&&!c&&(!!(0,s.isUndefined)(E)||E):f),n=t=>{const n=(0,s.mergeObjects)(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n},r=O(),i=D(),a=n(r),u=r===i?a:n(i);let d=a;return[()=>{const e=n(O());return P(e,d)?(d.data=e.data,d.isLoading=e.isLoading,d.isValidating=e.isValidating,d.error=e.error,d):(d=e,e)},()=>u]},[d,T]),x=(0,i.useSyncExternalStore)((0,r.useCallback)(e=>A(T,(t,n)=>{P(n,t)||e()}),[d,T]),j[0],j[1]),M=!b.current,W=R[T]&&R[T].length>0,q=x.data,G=(0,s.isUndefined)(q)?F:q,B=x.error,H=(0,r.useRef)(G),Y=p?(0,s.isUndefined)(q)?H.current:q:G,z=!(W&&!(0,s.isUndefined)(B))&&(M&&!(0,s.isUndefined)(f)?f:!w().isPaused()&&(c?!(0,s.isUndefined)(G)&&E:(0,s.isUndefined)(G)||E)),J=!!(T&&t&&M&&z),K=(0,s.isUndefined)(x.isValidating)?J:x.isValidating,Q=(0,s.isUndefined)(x.isLoading)?J:x.isLoading,X=(0,r.useCallback)(async e=>{const t=L.current;if(!T||!t||V.current||w().isPaused())return!1;let r,i,a=!0;const u=e||{},d=!U[T]||!u.dedupe,c=()=>s.IS_REACT_LEGACY?!V.current&&T===C.current&&b.current:T===C.current,l={isValidating:!1,isLoading:!1},f=()=>{I(l)},E=()=>{const e=U[T];e&&e[1]===i&&delete U[T]},g={isValidating:!0};(0,s.isUndefined)(O().data)&&(g.isLoading=!0);try{if(d&&(I(g),n.loadingTimeout&&(0,s.isUndefined)(O().data)&&setTimeout(()=>{a&&c()&&w().onLoadingSlow(T,n)},n.loadingTimeout),U[T]=[t(_),(0,s.getTimestamp)()]),[r,i]=U[T],r=await r,d&&setTimeout(E,n.dedupingInterval),!U[T]||U[T][1]!==i)return d&&c()&&w().onDiscarded(T),!1;l.error=s.UNDEFINED;const e=S[T];if(!(0,s.isUndefined)(e)&&(i<=e[0]||i<=e[1]||0===e[1]))return f(),d&&c()&&w().onDiscarded(T),!1;const u=O().data;l.data=o(u,r)?u:r,d&&c()&&w().onSuccess(r,T,n)}catch(e){E();const t=w(),{shouldRetryOnError:n}=t;t.isPaused()||(l.error=e,d&&c()&&(t.onError(e,T,t),(!0===n||(0,s.isFunction)(n)&&n(e))&&(w().revalidateOnFocus&&w().revalidateOnReconnect&&!k()||t.onErrorRetry(e,T,t,e=>{const t=R[T];t&&t[0]&&t[0](s.revalidateEvents.ERROR_REVALIDATE_EVENT,e)},{retryCount:(u.retryCount||0)+1,dedupe:!0}))))}return a=!1,f(),!0},[T,d]),Z=(0,r.useCallback)((...e)=>(0,s.internalMutate)(d,C.current,...e),[]);if((0,s.useIsomorphicLayoutEffect)(()=>{L.current=t,y.current=n,(0,s.isUndefined)(q)||(H.current=q)}),(0,s.useIsomorphicLayoutEffect)(()=>{if(!T)return;const e=X.bind(s.UNDEFINED,u);let t=0;const n=(0,s.subscribeCallback)(T,R,(n,r={})=>{if(n==s.revalidateEvents.FOCUS_EVENT){const n=Date.now();w().revalidateOnFocus&&n>t&&k()&&(t=n+w().focusThrottleInterval,e())}else if(n==s.revalidateEvents.RECONNECT_EVENT)w().revalidateOnReconnect&&k()&&e();else{if(n==s.revalidateEvents.MUTATE_EVENT)return X();if(n==s.revalidateEvents.ERROR_REVALIDATE_EVENT)return X(r)}});return V.current=!1,C.current=T,b.current=!0,I({_k:_}),z&&((0,s.isUndefined)(G)||s.IS_SERVER?e():(0,s.rAF)(e)),()=>{V.current=!0,n()}},[T]),(0,s.useIsomorphicLayoutEffect)(()=>{let e;function t(){const t=(0,s.isFunction)(g)?g(O().data):g;t&&-1!==e&&(e=setTimeout(n,t))}function n(){O().error||!v&&!w().isVisible()||!h&&!w().isOnline()?t():X(u).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[g,v,h,T]),(0,r.useDebugValue)(Y),c&&(0,s.isUndefined)(G)&&T){if(!s.IS_REACT_LEGACY&&s.IS_SERVER)throw new Error("Fallback data is required when using suspense in SSR.");L.current=t,y.current=n,V.current=!1;const e=m[T];if(!(0,s.isUndefined)(e)){const t=Z(e);a(t)}if(!(0,s.isUndefined)(B))throw B;{const e=X(u);(0,s.isUndefined)(Y)||(e.status="fulfilled",e.value=!0),a(e)}}return{mutate:Z,get data(){return N.data=!0,Y},get error(){return N.error=!0,B},get isValidating(){return N.isValidating=!0,K},get isLoading(){return N.isLoading=!0,Q}}})},93296:(e,t,n)=>{var r=n(90380),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=r.useState,a=r.useEffect,u=r.useLayoutEffect,d=r.useDebugValue;function o(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return u(function(){i.value=n,i.getSnapshot=t,o(i)&&c({inst:i})},[e,n,t]),a(function(){return o(i)&&c({inst:i}),e(function(){o(i)&&c({inst:i})})},[e]),d(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c}}]);