"use strict";(globalThis.webpackChunk_openmrs_esm_patient_forms_app=globalThis.webpackChunk_openmrs_esm_patient_forms_app||[]).push([[5298],{6449:(e,r,n)=>{n.d(r,{A:()=>s});var t=n(977),o=n.n(t),a=n(5924),i=n.n(a)()(o());i.push([e.id,".-esm-patient-forms__html-form-entry-wrapper__wrapper___bkx4M{width:95%;border:none;margin:0;padding:0;display:none}","",{version:3,sources:["webpack://./src/htmlformentry/html-form-entry-wrapper.scss"],names:[],mappings:"AAAA,8DACE,SAAA,CACA,WAAA,CACA,QAAA,CACA,SAAA,CACA,YAAA",sourcesContent:[".wrapper {\n  width: 95%;\n  border: none;\n  margin: 0;\n  padding: 0;\n  display: none;\n}\n"],sourceRoot:""}]),i.locals={wrapper:"-esm-patient-forms__html-form-entry-wrapper__wrapper___bkx4M"};const s=i},5298:(e,r,n)=>{n.r(r),n.d(r,{default:()=>S});var t=n(1343),o=n.n(t),a=n(2979),i=n(506),s=n.n(i),l=n(9867),u=n.n(l),c=n(105),d=n.n(c),p=n(7154),m=n.n(p),f=n(5326),v=n.n(f),A=n(7763),h=n.n(A),y=n(6449),b={};b.styleTagTransform=h(),b.setAttributes=m(),b.insert=d().bind(null,"head"),b.domAPI=u(),b.insertStyleElement=v(),s()(y.A,b);const w=y.A&&y.A.locals?y.A.locals:void 0;var g=n(1640);function _(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}const C=function(e){var r,n,a=e.closeWorkspaceWithSavedChanges,i=e.src,s=(0,t.useRef)(),l=(r=(0,t.useState)(!0),n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(r,n)||function(e,r){if(e){if("string"==typeof e)return _(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,r):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],c=l[1];(0,t.useEffect)((function(){var e=function(e){return"close-workspace"===(null==e?void 0:e.data)&&a()};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[a]);var d=(0,t.useCallback)((function(){var e,r,n;c(!1),s.current.contentWindow.addEventListener("beforeunload",(function(){return c(!0)}));var t=s.current,o=s.current.contentDocument;null===(e=o.querySelector("header"))||void 0===e||e.remove(),null===(r=o.querySelector(".patient-header"))||void 0===r||r.remove(),null===(n=o.querySelector("#breadcrumbs"))||void 0===n||n.remove(),t.style.display="block",t.height=o.body.scrollHeight+50+"px";var a=o.createElement("style");a.innerHTML="@media screen {\n      body { background: white; }\n     }",o.head.appendChild(a)}),[]);return o().createElement("div",null,u&&o().createElement(g.OuH,null),o().createElement("iframe",{ref:s,src:i,className:w.wrapper,onLoad:d}))},S=function(e){var r=e.patientUuid,n=(e.patient,e.closeWorkspaceWithSavedChanges),t=e.promptBeforeClosing,i=e.formInfo,s=(0,a.useVisitOrOfflineVisit)(r).currentVisit,l=i||{},u=l.encounterUuid,c=l.visitUuid,d=l.htmlForm;t((function(){return!0}));var p=u?d.formEditUiPage:d.formUiPage,m="".concat(window.openmrsBase,"/htmlformentryui/htmlform/").concat(p,".page?"),f=new URLSearchParams;f.append("patientId",r),(c||(null==s?void 0:s.uuid))&&f.append("visitId",null!=c?c:null==s?void 0:s.uuid),u&&f.append("encounterId",u),d.formUiResource?f.append("definitionUiResource",d.formUiResource):f.append("formUuid",d.formUuid),f.append("returnUrl","post-message:close-workspace");var v=i&&r;return o().createElement("div",null,v&&o().createElement(C,{src:m+f,closeWorkspaceWithSavedChanges:n}))}}}]);