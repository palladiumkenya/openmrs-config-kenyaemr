"use strict";(globalThis.webpackChunk_openmrs_esm_patient_chart_app=globalThis.webpackChunk_openmrs_esm_patient_chart_app||[]).push([[3119],{53119:(t,i,e)=>{e.r(i),e.d(i,{default:()=>y});var n=e(1343),l=e.n(n),r=e(72339),o=e(75198),s=e(71123),a=e(54440),u=e(63276),d=e(97821);function c(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}var v=e(8112);const y=function(t){var i,e,y=t.closeModal,f=t.mutateActiveVisit,p=(t.patientUuid,t.activeVisit),h=(0,r.useTranslation)().t,m=function(t,i){var e,l,o,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},f=(0,r.useTranslation)().t,p=(0,s.iX)().mutate,h=(l=(0,n.useState)(!1),o=2,function(t){if(Array.isArray(t))return t}(l)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,l,r=[],o=!0,s=!1;try{for(e=e.call(t);!(o=(n=e.next()).done)&&(r.push(n.value),!i||r.length!==i);o=!0);}catch(t){s=!0,l=t}finally{try{o||null==e.return||e.return()}finally{if(s)throw l}}return r}}(l,o)||function(t,i){if(t){if("string"==typeof t)return c(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(t,i):void 0}}(l,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=h[0],g=h[1],V=(null==t||null===(e=t.patient)||void 0===e?void 0:e.uuid)||"",b=(0,u.usePatientChartStore)(V),D=b.visitContext,k=b.setVisitContext,A=function(){(0,d.uA)(null==t?void 0:t.uuid).then((function(e){var n,l,r=e.data;i(),r.stopDatetime||k(r,(function(){return(0,u.invalidateVisitByUuid)(p,r.uuid)})),(0,u.invalidateVisitAndEncounterData)(p,V),(0,a.showSnackbar)({title:f("visitRestored","Visit restored"),subtitle:f("visitRestoredSuccessfully","{{visit}} restored successfully",{visit:null!==(l=null==t||null===(n=t.visitType)||void 0===n?void 0:n.display)&&void 0!==l?l:f("visit","Visit")}),kind:"success"}),null==y||y()})).catch((function(){var e,n;i(),(0,u.invalidateVisitAndEncounterData)(p,V),(0,a.showSnackbar)({title:f("visitNotRestored","Visit couldn't be restored"),subtitle:f("errorWhenRestoringVisit","Error occurred when restoring {{visit}}",{visit:null!==(n=null==t||null===(e=t.visitType)||void 0===e?void 0:e.display)&&void 0!==n?n:f("visit","Visit")}),kind:"error"})}))};return{initiateDeletingVisit:function(){g(!0),(0,d.TH)(null==t?void 0:t.uuid).then((function(){var e,n,l,r;i(),t.uuid===(null==D?void 0:D.uuid)&&k(null,null),(0,u.invalidateVisitAndEncounterData)(p,V),(0,a.showSnackbar)({title:f("visitDeleted","{{visit}} deleted",{visit:null!==(l=null==t||null===(e=t.visitType)||void 0===e?void 0:e.display)&&void 0!==l?l:f("visit","Visit")}),subtitle:f("visitDeletedSuccessfully","{{visit}} deleted successfully",{visit:null!==(r=null==t||null===(n=t.visitType)||void 0===n?void 0:n.display)&&void 0!==r?r:f("visit","Visit")}),kind:"success",actionButtonLabel:f("undo","Undo"),onActionButtonClick:A}),null==v||v()})).catch((function(){i(),(0,u.invalidateVisitAndEncounterData)(p,V),(0,a.showSnackbar)({title:f("errorDeletingVisit","Error deleting visit"),kind:"error",subtitle:f("errorOccurredDeletingVisit","An error occurred when deleting visit")})})).finally((function(){g(!1)}))},isDeletingVisit:m}}(p,f,y),g=m.isDeletingVisit,V=m.initiateDeletingVisit;return l().createElement("div",null,l().createElement(o.ModalHeader,{closeModal:y,title:h("deleteVisitDialogHeader","Are you sure you want to delete this visit?")}),l().createElement(o.ModalBody,null,l().createElement("p",{className:v.A.body},h("confirmDeleteVisitText","Deleting this {{visit}} will delete its associated encounters.",{visit:null!==(e=null==p||null===(i=p.visitType)||void 0===i?void 0:i.display)&&void 0!==e?e:h("visit","Visit")}))),l().createElement(o.ModalFooter,null,l().createElement(o.Button,{kind:"secondary",onClick:y},h("cancel","Cancel")),l().createElement(o.Button,{kind:"danger",onClick:V,disabled:g},g?l().createElement(o.InlineLoading,{description:h("deletingVisit","Deleting visit")}):h("deleteVisit","Delete visit"))))}}}]);