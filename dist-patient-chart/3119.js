"use strict";(globalThis.webpackChunk_openmrs_esm_patient_chart_app=globalThis.webpackChunk_openmrs_esm_patient_chart_app||[]).push([[3119],{53119:(t,i,e)=>{e.r(i),e.d(i,{default:()=>y});var n=e(1343),l=e.n(n),r=e(93150),o=e(75198),s=e(71123),a=e(38254),u=e(63276),d=e(97821);function c(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}var v=e(8112);const y=function(t){var i,e,y=t.closeModal,f=(t.patientUuid,t.visit),p=(0,r.useTranslation)().t,h=function(t){var i,e,l,o,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},f=(0,r.useTranslation)().t,p=(0,s.iX)().mutate,h=(0,a.useVisit)((null==t||null===(i=t.patient)||void 0===i?void 0:i.uuid)||"").mutate,g=(l=(0,n.useState)(!1),o=2,function(t){if(Array.isArray(t))return t}(l)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,l,r=[],o=!0,s=!1;try{for(e=e.call(t);!(o=(n=e.next()).done)&&(r.push(n.value),!i||r.length!==i);o=!0);}catch(t){s=!0,l=t}finally{try{o||null==e.return||e.return()}finally{if(s)throw l}}return r}}(l,o)||function(t,i){if(t){if("string"==typeof t)return c(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(t,i):void 0}}(l,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=g[0],b=g[1],V=(null==t||null===(e=t.patient)||void 0===e?void 0:e.uuid)||"",k=function(){(0,d.uA)(null==t?void 0:t.uuid).then((function(){var i,e;h(),(0,u.invalidateVisitAndEncounterData)(p,V),(0,a.showSnackbar)({title:f("visitRestored","Visit restored"),subtitle:f("visitRestoredSuccessfully","{{visit}} restored successfully",{visit:null!==(e=null==t||null===(i=t.visitType)||void 0===i?void 0:i.display)&&void 0!==e?e:f("visit","Visit")}),kind:"success"}),null==y||y()})).catch((function(){var i,e;h(),(0,u.invalidateVisitAndEncounterData)(p,V),(0,a.showSnackbar)({title:f("visitNotRestored","Visit couldn't be restored"),subtitle:f("errorWhenRestoringVisit","Error occurred when restoring {{visit}}",{visit:null!==(e=null==t||null===(i=t.visitType)||void 0===i?void 0:i.display)&&void 0!==e?e:f("visit","Visit")}),kind:"error"})}))};return{initiateDeletingVisit:function(){b(!0),(0,d.TH)(null==t?void 0:t.uuid).then((function(){var i,e,n,l;h(),(0,u.invalidateVisitAndEncounterData)(p,V),(0,a.showSnackbar)({title:f("visitDeleted","{{visit}} deleted",{visit:null!==(n=null==t||null===(i=t.visitType)||void 0===i?void 0:i.display)&&void 0!==n?n:f("visit","Visit")}),subtitle:f("visitDeletedSuccessfully","{{visit}} deleted successfully",{visit:null!==(l=null==t||null===(e=t.visitType)||void 0===e?void 0:e.display)&&void 0!==l?l:f("visit","Visit")}),kind:"success",actionButtonLabel:f("undo","Undo"),onActionButtonClick:k}),null==v||v()})).catch((function(){h(),(0,u.invalidateVisitAndEncounterData)(p,V),(0,a.showSnackbar)({title:f("errorDeletingVisit","Error deleting visit"),kind:"error",subtitle:f("errorOccurredDeletingVisit","An error occurred when deleting visit")})})).finally((function(){b(!1)}))},isDeletingVisit:m}}(f,y),g=h.isDeletingVisit,m=h.initiateDeletingVisit;return l().createElement("div",null,l().createElement(o.ModalHeader,{closeModal:y,title:p("deleteVisitDialogHeader","Are you sure you want to delete this visit?")}),l().createElement(o.ModalBody,null,l().createElement("p",{className:v.A.body},p("confirmDeleteVisitText","Deleting this {{visit}} will delete its associated encounters.",{visit:null!==(e=null==f||null===(i=f.visitType)||void 0===i?void 0:i.display)&&void 0!==e?e:p("visit","Visit")}))),l().createElement(o.ModalFooter,null,l().createElement(o.Button,{kind:"secondary",onClick:y},p("cancel","Cancel")),l().createElement(o.Button,{kind:"danger",onClick:m,disabled:g},g?l().createElement(o.InlineLoading,{description:p("deletingVisit","Deleting visit")}):p("deleteVisit","Delete visit"))))}}}]);